"use strict";(self.webpackChunktaskApp=self.webpackChunktaskApp||[]).push([[631],{9631:(B,h,l)=>{l.r(h),l.d(h,{TareasModule:()=>R});var p=l(6814),u=l(4670),e=l(4946),m=l(5516),x=l(9862);let d=(()=>{class a{constructor(t){this.http=t}getTareas(){return this.http.get(`${m.N.apiUrl}tasks`)}getTarea(t){return this.http.get(`${m.N.apiUrl}tasks/${t}`)}agregarTarea(t){return this.http.post(`${m.N.apiUrl}tasks`,t)}actualizarTarea(t){return this.http.put(`${m.N.apiUrl}tasks/${t._id}`,t)}eliminarTarea(t){return this.http.delete(`${m.N.apiUrl}tasks/${t}`)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(x.eN))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Z=l(4306),f=l(2207);let v=(()=>{class a{transform(t,r){const o=(0,f.Z)().format("YYYY-MM-DD"),c=(0,f.Z)(t).utc().format("YYYY-MM-DD"),s=(0,f.Z)(c).diff(o,"days");return 0===s?"Hoy":1===s?"Ma\xf1ana":s>1&&`En ${s} d\xedas`}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.Yjl({name:"tiempoFaltante",type:a,pure:!0}),a})();function C(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"span",11),e.ALo(2,"tiempoFaltante"),e._uU(3),e.ALo(4,"tiempoFaltante"),e.qZA(),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngClass","Hoy"===e.lcZ(2,2,t.tarea.fecha)?"bg-dark rounded ps-2":""),e.xp6(2),e.Oqu(e.lcZ(4,4,t.tarea.fecha))}}function b(a,n){1&a&&(e.TgZ(0,"span",12),e._uU(1,"Expirada"),e.qZA())}const A=function(a){return["/tareas/actualizar-tarea",a]};let F=(()=>{class a{constructor(t,r){this.tareasSerivces=t,this.router=r}ngAfterViewInit(){}eliminarTarea(t){this.tareasSerivces.eliminarTarea(t._id).subscribe(r=>{this.router.navigate(["redirect/tareas"])},r=>{console.log(r),alert("Ocurrio un error")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(d),e.Y36(u.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-card-tarea"]],inputs:{tarea:"tarea"},decls:22,vars:18,consts:[[1,"card","col-auto","bg-dark","text-light","border-0",2,"width","18rem",3,"ngClass"],[4,"ngIf","ngIfElse"],["tarea_expirada",""],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","text-secondary","mb-3"],[1,"text-fluid","ps-1"],[1,"descripcion","bg-dark","card-text","p-1","text-start","shadow","shadow-5"],[1,"row","botones","mx-auto","pb-1"],[1,"btn","btn-link","link-primary","col-auto",3,"routerLink"],[1,"btn","btn-link","link-danger","col-auto",3,"click"],[1,"col-sm-4","col-12","bg-success","ps-1",3,"ngClass"],[1,"col-sm-4","col-12","bg-danger","ps-1"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0),e.ALo(1,"tiempoFaltante"),e.YNc(2,C,5,6,"ng-container",1),e.ALo(3,"tiempoFaltante"),e.YNc(4,b,2,0,"ng-template",null,2,e.W1O),e.TgZ(6,"div",3)(7,"h5",4),e._uU(8),e.qZA(),e.TgZ(9,"h6",5),e._uU(10),e.ALo(11,"fecha"),e.qZA(),e.TgZ(12,"span",6),e._uU(13),e.ALo(14,"fecha"),e.qZA(),e.TgZ(15,"p",7),e._uU(16),e.qZA(),e.TgZ(17,"div",8)(18,"a",9),e._uU(19,"Actualizar"),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return r.eliminarTarea(r.tarea)}),e._uU(21,"Eliminar tarea"),e.qZA()()()()),2&t){const o=e.MAs(5);e.Q6J("ngClass","Hoy"===e.lcZ(1,8,r.tarea.fecha)?"shadow-warning":""),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,10,r.tarea.fecha))("ngIfElse",o),e.xp6(6),e.Oqu(r.tarea.titulo),e.xp6(2),e.hij("Registrada ",e.lcZ(11,12,r.tarea.createdAt)," "),e.xp6(3),e.Oqu(e.lcZ(14,14,r.tarea.fecha)),e.xp6(3),e.hij(" ",r.tarea.descripcion," "),e.xp6(2),e.Q6J("routerLink",e.VKq(16,A,r.tarea._id))}},dependencies:[p.mk,p.O5,u.rH,Z.j,v],styles:[".card[_ngcontent-%COMP%]:hover{z-index:3;box-shadow:0 0 5px 1px #fff}.card[_ngcontent-%COMP%]{position:relative;max-height:16rem;min-height:16rem;transition:all ease-in-out .2s}.shadow-warning[_ngcontent-%COMP%]{box-shadow:0 0 5px 1px #689afe}.descripcion[_ngcontent-%COMP%]{position:relative;z-index:3;transition:all ease-in-out .3s;min-height:3rem;max-height:3rem;overflow:hidden}.descripcion[_ngcontent-%COMP%]:hover{position:relative;z-index:3;max-height:20rem}.botones[_ngcontent-%COMP%]{position:absolute;z-index:1;bottom:0}"]}),a})();function y(a,n){1&a&&e._UZ(0,"app-card-tarea",6),2&a&&e.Q6J("tarea",n.$implicit)}function Y(a,n){if(1&a&&(e.ynx(0),e.YNc(1,y,1,1,"app-card-tarea",5),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tareas)}}function q(a,n){1&a&&(e.TgZ(0,"h2",7),e._uU(1,"No tienes tareas para mostrar!"),e.qZA())}const U=function(){return["/tareas/agregar"]};let k=(()=>{class a{constructor(t){this.tareasService=t,this.tareas=[],this.tareasService.getTareas().subscribe(r=>{this.tareas=r})}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(d))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-tareas"]],decls:7,vars:4,consts:[[1,"container-fluid","d-flex","p-2","justify-content-end"],[1,"btn","btn-dark",3,"routerLink"],[1,"container","p-0","pb-5","d-flex","flex-wrap","mt-5","gap-2","m-auto","justify-contentlg-lg-start","justify-content-md-start","justify-content-center"],[4,"ngIf","ngIfElse"],["sinTareas",""],[3,"tarea",4,"ngFor","ngForOf"],[3,"tarea"],[1,"text-white"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"a",1),e._uU(2,"Agregar tarrea"),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,Y,2,1,"ng-container",3),e.YNc(5,q,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&t){const o=e.MAs(6);e.xp6(1),e.Q6J("routerLink",e.DdM(3,U)),e.xp6(3),e.Q6J("ngIf",r.tareas.length>0)("ngIfElse",o)}},dependencies:[p.sg,p.O5,u.rH,F]}),a})();var g=l(1663),i=l(95);function I(a,n){1&a&&(e.TgZ(0,"span",13),e._uU(1,"Requerido"),e.qZA())}function M(a,n){if(1&a&&(e.TgZ(0,"span",13),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);let r;e.xp6(1),e.hij("Minimo de ",null==(r=t.formulario_tarea.get("titulo"))||null==r.errors?null:r.errors.minlength.requiredLength," cactares")}}function J(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10),e.YNc(2,I,2,0,"span",11),e.YNc(3,M,2,1,"span",12),e.qZA(),e.BQk()),2&a){const t=e.oxw();let r,o;e.xp6(2),e.Q6J("ngIf",null==(r=t.formulario_tarea.get("titulo"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.formulario_tarea.get("titulo"))||null==o.errors?null:o.errors.minlength)}}function N(a,n){1&a&&(e.TgZ(0,"span",13),e._uU(1,"Requerido"),e.qZA())}function Q(a,n){if(1&a&&(e.TgZ(0,"span",13),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);let r;e.xp6(1),e.hij("Minimo ",null==(r=t.formulario_tarea.get("descripcion"))||null==r.errors?null:r.errors.minlength.requiredLength," cactares")}}function O(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10),e.YNc(2,N,2,0,"span",11),e.YNc(3,Q,2,1,"span",12),e.qZA(),e.BQk()),2&a){const t=e.oxw();let r,o;e.xp6(2),e.Q6J("ngIf",null==(r=t.formulario_tarea.get("descripcion"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.formulario_tarea.get("descripcion"))||null==o.errors?null:o.errors.minlength)}}function w(a,n){1&a&&(e.TgZ(0,"span",13),e._uU(1,"Requerido"),e.qZA())}function z(a,n){1&a&&(e.TgZ(0,"span",13),e._uU(1,"Formato requerido dd/mm/aaaa"),e.qZA())}function L(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10),e.YNc(2,w,2,0,"span",11),e.YNc(3,z,2,0,"span",12),e.qZA(),e.BQk()),2&a){const t=e.oxw();let r,o;e.xp6(2),e.Q6J("ngIf",null==(r=t.formulario_tarea.get("fecha"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.formulario_tarea.get("fecha"))||null==o.errors?null:o.errors.pattern)}}let T=(()=>{class a{constructor(t,r,o,c){this.fb=t,this.activatedRoute=r,this.tareasService=o,this.router=c,this.dateRegex=/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/,this.id_tarea="",this.formulario_tarea=this.fb.group({_id:[""],titulo:["",[i.kI.required,i.kI.minLength(6)]],descripcion:["",[i.kI.required,i.kI.minLength(6)]],fecha:["",[i.kI.required,i.kI.pattern(this.dateRegex)]]}),this.id_tarea=this.activatedRoute.snapshot.params.id_tarea,this.id_tarea&&this.getTarea()}ngOnInit(){}procesarFormulario(){""==this.formulario_tarea.get("_id")?.value?this.crearTarea():this.actualizarTarea()}crearTarea(){this.tareasService.agregarTarea(this.formulario_tarea.value).subscribe(t=>{alert("Tarea creada"),this.router.navigate(["/tareas"])},t=>{if("OK"!=t.statusText)return alert("Ocurrio un error!");this.router.navigate(["/tareas"])})}actualizarTarea(){this.tareasService.actualizarTarea(this.formulario_tarea.value).subscribe(t=>{alert("Tarea actualizada!"),this.router.navigate(["/tareas"])},t=>{console.log(t),alert("Ocurrio un error!")})}getTarea(){this.tareasService.getTarea(this.id_tarea).subscribe(t=>{const{_id:r,titulo:o,descripcion:c,fecha:s}=t.taskFound,$=(0,f.Z)(s).utc().format("YYYY-MM-DD");this.formulario_tarea.setValue({_id:r,titulo:o,descripcion:c,fecha:$})})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(i.qu),e.Y36(u.gz),e.Y36(d),e.Y36(u.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-form-tarea"]],decls:20,vars:6,consts:[[1,"col-lg-3","col-md-6","col-10","m-auto","mt-5","p-3","bg-dark","text-white",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleFormControlInput1",1,"form-label"],["type","text","id","titulo","name","titulo","formControlName","titulo","placeholder","",1,"form-control"],[4,"ngIf"],["for","descripcion",1,"form-label"],["id","descripcion","name","descripcion","formControlName","descripcion","rows","3",1,"form-control"],["for","fecha",1,"form-label"],["type","date","id","fecha","name","fecha","formControlName","fecha",1,"form-control"],["type","submit",1,"btn","btn-primary","d-block","m-auto",3,"disabled"],["role","alert",1,"alert","alert-danger","p-0","mt-1","d-flex"],["class","fs-6  p-1 ",4,"ngIf"],["class","fs-6 p-1 ",4,"ngIf"],[1,"fs-6","p-1"]],template:function(t,r){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.procesarFormulario()}),e.TgZ(1,"div",1)(2,"label",2),e._uU(3,"Tarea"),e.qZA(),e._UZ(4,"input",3),e.YNc(5,J,4,2,"ng-container",4),e.qZA(),e.TgZ(6,"div",1)(7,"label",5),e._uU(8,"Descripci\xf3n"),e.qZA(),e._UZ(9,"textarea",6),e.YNc(10,O,4,2,"ng-container",4),e.qZA(),e.TgZ(11,"div",1)(12,"label",7),e._uU(13,"Fecha"),e.qZA(),e._UZ(14,"input",8),e.YNc(15,L,4,2,"ng-container",4),e.qZA(),e.TgZ(16,"button",9),e._uU(17),e.qZA()(),e._UZ(18,"br")(19,"br")),2&t){let o,c,s,_;e.Q6J("formGroup",r.formulario_tarea),e.xp6(5),e.Q6J("ngIf",(null==(o=r.formulario_tarea.get("titulo"))?null:o.touched)&&!(null!=(o=r.formulario_tarea.get("titulo"))&&o.valid)),e.xp6(5),e.Q6J("ngIf",(null==(c=r.formulario_tarea.get("descripcion"))?null:c.touched)&&!(null!=(c=r.formulario_tarea.get("descripcion"))&&c.valid)),e.xp6(5),e.Q6J("ngIf",(null==(s=r.formulario_tarea.get("fecha"))?null:s.touched)&&!(null!=(s=r.formulario_tarea.get("fecha"))&&s.valid)),e.xp6(1),e.Q6J("disabled",!r.formulario_tarea.valid),e.xp6(1),e.Oqu(""==(null==(_=r.formulario_tarea.get("_id"))?null:_.value)?"Enviar":"Actulizar tarea")}},dependencies:[p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]}),a})();const S=[{path:"",component:k,canActivate:[g.u]},{path:"agregar",component:T,pathMatch:"full",canActivate:[g.u]},{path:"actualizar-tarea/:id_tarea",component:T,pathMatch:"full",canActivate:[g.u]}];let j=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.Bz.forChild(S),u.Bz]}),a})();var E=l(6208);let R=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[p.ez,j,i.UX,E.m]}),a})()}}]);